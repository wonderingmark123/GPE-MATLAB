function make_images2(task,tcoef)
% global tcoef;
f=figure;
set(f,'Position',[100 200 700 280]);
set(f, 'PaperUnits', 'points', 'PaperPosition', [0 0 700 280]);
task.grid.image2();

for j=1:10000
    if(exist(sprintf('snapshots/slice_%05d.mat',j),'file') ~= 2)
        continue
    end
    load(sprintf('snapshots/slice_%05d.mat',j));
    clf(f,'reset')
    
    time = j*tcoef;
%     curangle = (rotangle(time,omegaBar,0.25) + initphase)/pi;
     ang1 = angle(sum(sum(slice.*(task.grid.mesh.x2>0))));% angle(sum(sum(slice.*(angles3>(-pi + curangle*pi)).*(angles3<-curangle*pi))));
     slice = slice.*exp(-1i*ang1);
	[coresp, coresm] = detect_core(slice,task.grid.mesh.x2,task.grid.mesh.y2);
    [a1,a2]=task.grid.image2(slice,f);
% 	[s,v] = velocity_field(slice,r,-(j-1)*dt*1.5*2*pi,slice0);
%     [s,v] = velocity_field(slice,r,-angles(j)*pi-pi/2,slice0);

% 	set(f, 'PaperUnits', 'inches', 'PaperPosition', [0 0 8 6]);
    annotation(f,'textbox',...
        [0.0317276422764227 0.471150466181709 0.0465903100058365 0.0775989697522663],...
        'String',{'Y'},...
        'FontSize',14,...
        'FitBoxToText','on',...
        'LineStyle','none');
    annotation(f,'textbox',...
        [0.247076074332171 0.00890500839759707 0.0482281220940758 0.0775989697522663],...
        'String',{'X'},...
        'FontSize',14,...
        'FitBoxToText','on',...
        'LineStyle','none');
    annotation(f,'textbox',...
        [0.738365272938442 0.00890500839759707 0.0482281220940758 0.0775989697522663],...
        'String',{'X'},...
        'FontSize',14,...
        'FitBoxToText','on',...
        'LineStyle','none');
    annotation(f,'textbox',...
        [0.434507042253521 0.87412575347515 0.199082575912684 0.110344634293116],...
        'String',{sprintf('t = %0.4f sec',(time))},...
        'FontWeight','bold',...
        'FontSize',14,...
        'FitBoxToText','on',...
        'LineStyle','none',...
        'Color',[0 0 0]);
	hold all;
% 	s2 = streamline(s);
% 	set(s2,'Color',[1,1,1]);
% 	set(s2,'LineWidth',1);
	plot(a1,coresp(:,1),coresp(:,2),'MarkerSize',6,'Marker','+','LineStyle','none','Color',[1 0 0]);
    plot(a1,coresm(:,1),coresm(:,2),'MarkerSize',6,'Marker','o','LineStyle','none','Color',[0 0 1]);

	plot(a2,coresp(:,1),coresp(:,2),'MarkerSize',6,'Marker','+','LineStyle','none','Color',[1 0 0]);
    plot(a2,coresm(:,1),coresm(:,2),'MarkerSize',6,'Marker','o','LineStyle','none','Color',[0 0 1]);
	print(f,'-dpng',sprintf('snapshots/sol_%05d.png',j), '-r150');
end